<!DOCTYPE html>
<html>
<head>
    <title>Painter's Algorithm - WebGL</title>
    <style>
        body { margin: 0; }
        canvas { display: block; }
    </style>
</head>
<body>
    <canvas id="webgl-canvas" width="800" height="600"></canvas>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gl-matrix/3.4.0/gl-matrix-min.js"></script>
    <script id="vertex-shader" type="x-shader/x-vertex">
        attribute vec4 a_position;
        attribute vec4 a_color;
        varying vec4 v_color;

        uniform mat4 u_modelViewMatrix;
        uniform mat4 u_projectionMatrix;

        void main() {
            gl_Position = u_projectionMatrix * u_modelViewMatrix * a_position;
            v_color = a_color;
        }
    </script>
    <script id="fragment-shader" type="x-shader/x-fragment">
        precision mediump float;
        varying vec4 v_color;

        void main() {
            gl_FragColor = v_color;
        }
    </script>
    <script type="text/javascript">
        window.onload = function() {
            var canvas = document.getElementById('webgl-canvas');
            var gl = canvas.getContext('webgl');
            if (!gl) {
                console.error('Unable to initialize WebGL. Your browser may not support it.');
                return;
            }

            // Define vertices, colors, and indices for primitives
            var vertices = [
                // Cube vertices
                -1, -1, -1, 1, 1, 1,
                -1, -1, 1, 1, 1, 1,
                -1, 1, -1, 1, 1, 1,
                1, -1, -1, 1, 1, 1,
                1, -1, 1, 1, 1, 1,
                1, 1, -1, 1, 1, 1,
                1, 1, 1, 1, 1, 1,
                -1, 1, 1, 1, 1, 1,
                // Sphere vertices (sample)
                0, 0, 0, 1, 0, 0, // center and color
                // Add more vertices for other primitives...
            ];
            var indices = [0, 1, 2, 0, 2, 3,   // Front face
                           4, 5, 6, 4, 6, 7,   // Back face
                           8, 9, 10, 8, 10, 11,  // Top face
                           12, 13, 14, 12, 14, 15,  // Bottom face
                           16, 17, 18, 16, 18, 19,  // Right face
                           20, 21, 22, 20, 22, 23]; // Left face

            // Create and bind buffer for vertices
            var vertexBuffer = gl.createBuffer();
            gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);
            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);

            // Create and bind buffer for indices
            var indexBuffer = gl.createBuffer();
            gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, indexBuffer);
            gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(indices), gl.STATIC_DRAW);

            // Get shader source
            var vertexShaderSource = document.getElementById('vertex-shader').textContent;
            var fragmentShaderSource = document.getElementById('fragment-shader').textContent;

            // Compile shaders
            var vertexShader = gl.createShader(gl.VERTEX_SHADER);
            gl.shaderSource(vertexShader, vertexShaderSource);
            gl.compileShader(vertexShader);

            var fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);
            gl.shaderSource(fragmentShader, fragmentShaderSource);
            gl.compileShader(fragmentShader);

            // Create and link shader program
            var shaderProgram = gl.createProgram();
            gl.attachShader(shaderProgram, vertexShader);
            gl.attachShader(shaderProgram, fragmentShader);
            gl.linkProgram(shaderProgram);
            gl.useProgram(shaderProgram);

            // Set up attribute pointers
            var positionAttributeLocation = gl.getAttribLocation(shaderProgram, 'a_position');
            var colorAttributeLocation = gl.getAttribLocation(shaderProgram, 'a_color');
            gl.vertexAttribPointer(positionAttributeLocation, 3, gl.FLOAT, false, 6 * Float32Array.BYTES_PER_ELEMENT, 0);
            gl.vertexAttribPointer(colorAttributeLocation, 3, gl.FLOAT, false, 6 * Float32Array.BYTES_PER_ELEMENT, 3 * Float32Array.BYTES_PER_ELEMENT);
            gl.enableVertexAttribArray(positionAttributeLocation);
            gl.enableVertexAttribArray(colorAttributeLocation);

            // Set up uniforms
            var modelViewMatrixLocation = gl.getUniformLocation(shaderProgram, 'u_modelViewMatrix');
            var projectionMatrixLocation = gl.getUniformLocation(shaderProgram, 'u_projectionMatrix');
            var modelViewMatrix = mat4.create();
            var projectionMatrix = mat4.create();

            // Set up perspective projection
            mat4.perspective(projectionMatrix, Math.PI / 4, canvas.width / canvas.height, 0.1, 100);

            // Set up initial model-view matrix
            var eye = [0, 0, 5];
            var target = [0, 0, 0];
            var up = [0, 1, 0];
            mat4.lookAt(modelViewMatrix, eye, target, up);

            // Set model-view and projection matrices
            gl.uniformMatrix4fv(modelViewMatrixLocation, false, modelViewMatrix);
            gl.uniformMatrix4fv(projectionMatrixLocation, false, projectionMatrix);

            // Clear canvas
            gl.clearColor(0.9, 0.9, 0.9, 1.0);
            gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);
            gl.enable(gl.DEPTH_TEST);

            // Draw primitives
            gl.drawElements(gl.TRIANGLES, indices.length, gl.UNSIGNED_SHORT, 0);
        };
    </script>
</body>
</html>
